<nav>
    <div class="logo">
        <a href="index.html">
            <img src="https://i.postimg.cc/sgvNN6w5/Gemini-Generated-Image-xajg8yxajg8yxajg-removebg-preview.png" alt="ToolGram">
        </a>
    </div>
    <div class="search">
        <input id="nav-search" placeholder="Search tools..." autocomplete="off">
        <i class="fas fa-search"></i>
        <div id="search-results"></div>
    </div>
    <div class="nav-buttons">
        <a href="tools.html" class="contact-btn" id="nav-tools-btn">
            <i class="fas fa-tools"></i><span>All Tools</span>
        </a>
        <a href="contact.html" class="contact-btn" id="nav-contact-btn">
            <i class="fas fa-envelope"></i><span>Contact</span>
        </a>
    </div>
</nav>

<script>
// Search functionality - self-contained in nav.html
function initNavigationSearch() {
    const searchInput = document.getElementById('nav-search');
    const resultsDiv = document.getElementById('search-results');
    
    if(!searchInput || !resultsDiv) return;
    
    // Tool database
    const tools = [
        {name: 'Case Converter', url: 'tools/case-normalizer.html', desc: 'Convert text between cases'},
        {name: 'Base64 Encoder', url: 'tools/base64.html', desc: 'Encode/decode Base64'},
        {name: 'JSON Formatter', url: 'tools/json-formatter.html', desc: 'Format & validate JSON'},
        {name: 'Password Generator', url: 'tools/password-generator.html', desc: 'Generate secure passwords'},
        {name: 'UUID Generator', url: 'tools/uuid-generator.html', desc: 'Generate UUIDs'},
        {name: 'Hash Generator', url: 'tools/hash-generator.html', desc: 'Generate SHA256/MD5'}
    ];
    
    // Search event
    searchInput.addEventListener('input', function(e) {
        const query = e.target.value.toLowerCase().trim();
        resultsDiv.innerHTML = '';
        
        if(query.length < 2) {
            resultsDiv.style.display = 'none';
            return;
        }
        
        const matches = tools.filter(tool => 
            tool.name.toLowerCase().includes(query) || 
            tool.desc.toLowerCase().includes(query)
        );
        
        if(matches.length > 0) {
            matches.forEach(tool => {
                const item = document.createElement('a');
                item.href = tool.url;
                item.className = 'result-item';
                item.innerHTML = `<strong>${tool.name}</strong><br><small>${tool.desc}</small>`;
                resultsDiv.appendChild(item);
            });
            resultsDiv.style.display = 'block';
        } else {
            resultsDiv.innerHTML = '<div class="no-results">No tools found</div>';
            resultsDiv.style.display = 'block';
        }
    });
    
    // Hide results when clicking outside
    document.addEventListener('click', function(e) {
        if(!searchInput.contains(e.target) && !resultsDiv.contains(e.target)) {
            resultsDiv.style.display = 'none';
        }
    });
}

// Button highlighting - hides current page button
function highlightCurrentPage() {
    const currentPath = window.location.pathname;
    const currentPage = currentPath.split('/').pop() || 'index.html';
    
    // Hide tools button if on tools page
    const toolsBtn = document.getElementById('nav-tools-btn');
    const contactBtn = document.getElementById('nav-contact-btn');
    
    if(toolsBtn && (currentPage === 'tools.html' || currentPath.includes('tools.html'))) {
        toolsBtn.style.opacity = '0';
        toolsBtn.style.pointerEvents = 'none';
        toolsBtn.style.cursor = 'default';
    }
    
    if(contactBtn && (currentPage === 'contact.html' || currentPath.includes('contact.html'))) {
        contactBtn.style.opacity = '0';
        contactBtn.style.pointerEvents = 'none';
        contactBtn.style.cursor = 'default';
    }
}

// Fix logo link for tool pages
function fixLogoLink() {
    const logoLink = document.querySelector('.logo a');
    if(logoLink && window.location.pathname.includes('/tools/')) {
        logoLink.href = '../index.html';
    }
}

// Initialize everything when nav loads
document.addEventListener('DOMContentLoaded', function() {
    initNavigationSearch();
    highlightCurrentPage();
    fixLogoLink();
});
</script>
